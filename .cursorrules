# Cursor 编程规则与最佳实践 | Cursor Programming Rules & Best Practices

## 🚀 Cursor 工作流程 | Cursor Workflow

### AI 助手交互模式 | AI Assistant Interaction Mode

#### 1. 响应模式 | Response Mode
- **Agent Mode**: 优先使用 Agent Mode 进行代码修改和文件操作
- **Ask Mode**: 仅在需要获取信息、规划或确认时使用 Ask Mode
- **JSON 响应格式**: AI 助手响应必须包含 'answer_user' 字段，包含完整的用户显示句子

#### 2. 工具使用策略 | Tool Usage Strategy
- **read_file**: 在修改文件前始终先读取文件内容
- **search_replace**: 使用精确的 old_string 确保唯一匹配
- **run_terminal_cmd**: 优先使用 is_background=true 运行长时间进程
- **grep**: 用于代码搜索和模式匹配
- **todo_write**: 复杂任务必须创建和维护 TODO 列表

### 3. 错误处理流程 | Error Handling Workflow
- **linter 错误**: 修改文件后立即运行 read_lints 检查
- **立即修复**: 发现错误立即修复，不要累积技术债务
- **边界情况**: 考虑边缘情况和异常处理

---

## 📝 代码生成规则 | Code Generation Rules

### 1. 文件创建原则 | File Creation Principles
- **需求确认**: 明确文件用途、位置和依赖关系
- **模板遵循**: 使用项目标准模板和结构
- **导入管理**: 一次性添加所有必需的导入语句
- **注释规范**: 添加有意义的注释和文档字符串

### 2. 代码修改原则 | Code Modification Principles
- **最小化更改**: 只修改必要的代码
- **上下文理解**: 理解修改的影响范围
- **测试验证**: 修改后验证功能正确性
- **回滚准备**: 保持可回滚的修改历史

### 3. 重构最佳实践 | Refactoring Best Practices
- **逐步进行**: 小步快走，避免大范围重构
- **功能保持**: 确保重构不改变原有功能
- **性能监控**: 重构后检查性能影响
- **代码审查**: 重构后进行同行评审

### 4. 文档编写准则 | Documentation Writing Guidelines
- **严格遵循指令**: 文档编写必须严格按照用户指令进行
- **避免额外输出**: 不要创建或输出额外延伸的文件，除非明确要求
- **指令优先**: 用户指令优先于任何默认行为或扩展建议

---

## 🔍 代码分析与调试 | Code Analysis & Debugging

### 1. 问题诊断流程 | Problem Diagnosis Process
- **现象描述**: 详细记录问题表现
- **环境确认**: 检查运行环境和依赖
- **日志分析**: 查看相关日志信息
- **代码审查**: 检查相关代码逻辑

### 2. 调试策略 | Debugging Strategy
- **断点设置**: 在关键位置设置断点
- **变量追踪**: 监控关键变量变化
- **分步执行**: 逐步执行代码检查状态
- **隔离测试**: 隔离问题组件进行测试

### 3. 性能优化 | Performance Optimization
- **性能监控**: 使用工具监控性能指标
- **瓶颈识别**: 识别性能瓶颈位置
- **优化策略**: 选择合适的优化方案
- **效果验证**: 验证优化效果

---

## 📁 项目结构管理 | Project Structure Management

### 1. 文件组织 | File Organization
- **目录结构**: 遵循项目标准目录结构
- **命名规范**: 使用清晰一致的文件命名
- **模块划分**: 合理划分模块和组件
- **依赖管理**: 管理好模块间的依赖关系

### 2. 版本控制 | Version Control
- **提交频率**: 频繁提交，避免大块更改
- **提交信息**: 编写清晰的提交信息
- **分支策略**: 使用合适的分支策略
- **冲突解决**: 妥善处理合并冲突

### 3. 文档维护 | Documentation Maintenance
- **README 更新**: 及时更新项目文档
- **代码注释**: 维护代码注释和文档
- **API 文档**: 保持 API 文档同步
- **变更记录**: 记录重要变更

---

## 🧪 测试与质量保证 | Testing & Quality Assurance

### 1. 测试策略 | Testing Strategy
- **单元测试**: 为核心逻辑编写单元测试
- **集成测试**: 测试模块间交互
- **端到端测试**: 测试完整用户流程
- **回归测试**: 防止功能退化

### 2. 代码质量 | Code Quality
- **代码审查**: 定期进行代码审查
- **静态分析**: 使用工具进行静态分析
- **性能测试**: 进行性能和负载测试
- **安全检查**: 检查安全漏洞

### 3. 持续集成 | Continuous Integration
- **自动化构建**: 设置自动化构建流程
- **自动化测试**: 配置自动化测试执行
- **质量门禁**: 设置代码质量门禁
- **部署流程**: 建立自动化部署流程

---

## 🤝 协作开发规范 | Collaborative Development Standards

### 1. 沟通原则 | Communication Principles
- **明确需求**: 清晰表达需求和期望
- **及时反馈**: 及时给予反馈和建议
- **知识共享**: 分享重要信息和经验
- **问题解决**: 积极参与问题解决

### 2. 代码审查 | Code Review
- **审查标准**: 建立代码审查标准
- **审查流程**: 定义审查流程和责任
- **反馈方式**: 建设性反馈
- **持续改进**: 从审查中学习改进

### 3. 团队协作 | Team Collaboration
- **任务分配**: 合理分配任务和工作
- **进度跟踪**: 跟踪项目进度
- **风险管理**: 识别和管理风险
- **知识传承**: 确保知识传承

---

## 🎯 《算一卦/Destiny》项目特定规则 | "Calculate a Fortune/Destiny" Project Specific Rules

### 1. 产品规则遵循 | Product Rules Compliance
- **核心理念**: 不安慰用户，只给结果的算卦器
- **卦词设计**: 确保卦词有态度、有后果、有针对性
- **用户体验**: 保持极简界面，避免技术术语

### 2. 技术实现准则 | Technical Implementation Guidelines
- **双语支持**: 确保中英文内容正确对应
- **性能要求**: SaaS服务需要支持高并发
- **数据安全**: 用户数据匿名化处理
- **内容合规**: 避免敏感政治/宗教话题

### 3. 开发优先级 | Development Priorities
- **核心功能**: 优先实现命运判决引擎
- **用户体验**: 确保分享和传播体验
- **技术债务**: 定期清理技术债务
- **性能优化**: 关注响应时间和用户体验

---

## ⚠️ 注意事项 | Important Notes

### 1. 工具使用限制 | Tool Usage Limitations
- **Sandbox 环境**: 了解 Cursor 的沙箱限制
- **权限请求**: 需要时主动请求必要权限
- **命令执行**: 非交互式命令使用 -y 标志

### 2. 错误预防 | Error Prevention
- **备份重要**: 修改前备份重要文件
- **逐步验证**: 大更改逐步验证
- **回滚计划**: 准备好回滚方案

### 3. 学习与改进 | Learning & Improvement
- **反馈收集**: 收集用户和团队反馈
- **流程优化**: 持续优化开发流程
- **技术更新**: 关注新技术发展
- **最佳实践**: 学习行业最佳实践

---

*这些规则将随着项目发展和 Cursor 更新而调整。请定期检查更新。*

*These rules will be adjusted as the project develops and Cursor updates. Please check for updates regularly.*